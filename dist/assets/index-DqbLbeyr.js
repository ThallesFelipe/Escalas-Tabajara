!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=["Gaga","A. Viihtube","Smigou","Rita"],t=["Navala","LATAM","BBB","Leidi","Espalha Lixo"],a=[{label:"Cozinha",key:"cozinha",icon:"restaurant"},{label:"Banheiro de baixo",key:"banhBaixo",icon:"shower"},{label:"Banheiro su√≠te",key:"banhSuite",icon:"bathtub"},{label:"Sala e corredor",key:"sala",icon:"weekend"},{label:"Lavabo",key:"lavabo",icon:"wash"}],r=[{day:"Domingo",users:"Espalha Lixo e Rita",dayIndex:0},{day:"Segunda-feira",users:"Gaga e A. Rodrigo",dayIndex:1},{day:"Ter√ßa-feira",users:"A. Viihtube",dayIndex:2},{day:"Quarta-feira",users:"Navala e LATAM",dayIndex:3},{day:"Quinta-feira",users:"BBB e Smigou",dayIndex:4},{day:"Sexta-feira",users:"Leidi",dayIndex:5},{day:"S√°bado",users:"PANOS",dayIndex:6}],n={referenceDate:new Date(2025,11,8),themeStorageKey:"escalas-tabajara-theme",darkModeClass:"dark-mode"},s="light_mode",i="dark_mode",o="Alternar para modo escuro",l="Alternar para modo claro";function d(e){const t=e.length,r=a.length,n=[];for(let s=0;s<t;s++){const i={};a.forEach(((a,r)=>{const n=(r+s)%t;i[a.key]=e[n]})),t<r&&(i.lavabo=i.sala),n.push(i)}return n}const c={monday_tuesday:d(e),thursday_friday:d(t)};"undefined"!=typeof window&&"localhost"===window.location?.hostname&&(console.info("üìã Escalas Tabajara - Configura√ß√£o atual:"),console.info(`   Segunda/Ter√ßa: ${e.length} pessoas ‚Üí ${c.monday_tuesday.length} rota√ß√µes`),console.info(`   Quinta/Sexta: ${t.length} pessoas ‚Üí ${c.thursday_friday.length} rota√ß√µes`),console.info("   Moradores Seg/Ter:",e.join(", ")),console.info("   Moradores Qui/Sex:",t.join(", ")));const h=e=>{if(!(e instanceof Date)||isNaN(e.getTime()))throw new Error("Data inv√°lida fornecida para formata√ß√£o");return e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})},u=(e,t,a)=>{if(!(e instanceof Date)||isNaN(e.getTime())||!(t instanceof Date)||isNaN(t.getTime()))throw new Error("Datas inv√°lidas fornecidas para c√°lculo de ciclos");let r=new Date(e);0===e.getDay()&&r.setDate(e.getDate()+1);const n=(e=>{if(!(e instanceof Date)||isNaN(e.getTime()))throw new Error("Data inv√°lida fornecida para encontrar Segunda e Ter√ßa");const t=e.getDay(),a=0===t?-6:1-t,r=new Date(e);return r.setDate(e.getDate()+a),r.setHours(0,0,0,0),r})(r),s=Math.max(0,((e,t)=>{if(!(e instanceof Date)||isNaN(e.getTime())||!(t instanceof Date)||isNaN(t.getTime()))throw new Error("Datas inv√°lidas fornecidas para c√°lculo de diferen√ßa");const a=e=>{const t=new Date(e),a=t.getDay(),r=0===a?-6:1-a;return t.setDate(t.getDate()+r),t.setHours(0,0,0,0),t},r=a(e),n=a(t);return Math.floor((r-n)/6048e5)})(n,t)),i=s%(a.monday_tuesday?.length||1),o=s%(a.thursday_friday?.length||1),l=new Date(n);return l.setDate(n.getDate()+4),{monday_tuesdayDate:n,thursday_fridayDate:l,monday_tuesdayCycleIndex:i,thursday_fridayCycleIndex:o}};class m{constructor(){this.cache=new Map,this.initializeCache()}initializeCache(){const e={scheduleContainer:"#cleaningSchedule",washingTableBody:"#washingTableBody",themeToggle:"#themeToggle",themeIcon:"#themeIcon",footerYear:"#currentYear"};for(const[t,a]of Object.entries(e))this.cache.set(t,document.querySelector(a))}get(e){return this.cache.get(e)}set(e,t){this.cache.set(e,t)}validateEssentialElements(){return["scheduleContainer","themeToggle","themeIcon"].every((e=>null!==this.get(e)))}refresh(){this.cache.clear(),this.initializeCache()}}class g{static createElement(e,t={}){const a=document.createElement(e);if(t.classes&&a.classList.add(...t.classes),t.attributes)for(const[r,n]of Object.entries(t.attributes))a.setAttribute(r,n);return t.textContent&&(a.textContent=t.textContent),t.innerHTML&&(a.innerHTML=t.innerHTML),a}static clearElement(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static safeAddClass(e,t){e&&void 0!==e.classList&&e.classList.add(t)}static safeRemoveClass(e,t){e&&void 0!==e.classList&&e.classList.remove(t)}static hasClass(e,t){return e&&e.classList&&e.classList.contains(t)}static safeSetAttribute(e,t,a){e&&"function"==typeof e.setAttribute&&e.setAttribute(t,a)}static safeSetText(e,t){e&&(e.textContent=t)}static safeAddEventListener(e,t,a,r={}){e&&"function"==typeof e.addEventListener&&e.addEventListener(t,a,r)}}class y{constructor(e){this.domCache=e,this.isDarkMode=!1,this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.init()}init(){this.loadSavedTheme(),this.setupEventListeners(),this.setupMediaQueryListener(),this.applyTheme(this.isDarkMode)}loadSavedTheme(){try{const e=localStorage.getItem(n.themeStorageKey);this.isDarkMode=null!==e?"dark"===e:this.mediaQuery.matches}catch(e){console.warn("Erro ao carregar tema do localStorage:",e),this.isDarkMode=this.mediaQuery.matches}}setupEventListeners(){const e=this.domCache.get("themeToggle");g.safeAddEventListener(e,"click",(()=>{this.toggleTheme()})),g.safeAddEventListener(e,"keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleTheme())}))}setupMediaQueryListener(){this.mediaQuery.addEventListener("change",(e=>{null===localStorage.getItem(n.themeStorageKey)&&(this.isDarkMode=e.matches,this.applyTheme(this.isDarkMode))}))}toggleTheme(){this.isDarkMode=!this.isDarkMode,this.applyTheme(this.isDarkMode),this.saveTheme()}applyTheme(e){const t=document.body,a=this.domCache.get("themeIcon"),r=this.domCache.get("themeToggle");e?(g.safeAddClass(t,n.darkModeClass),g.safeSetText(a,i),g.safeSetAttribute(r,"aria-label",l)):(g.safeRemoveClass(t,n.darkModeClass),g.safeSetText(a,s),g.safeSetAttribute(r,"aria-label",o)),this.dispatchThemeChangeEvent(e)}saveTheme(){try{localStorage.setItem(n.themeStorageKey,this.isDarkMode?"dark":"light")}catch(e){console.warn("Erro ao salvar tema no localStorage:",e)}}dispatchThemeChangeEvent(e){const t=new CustomEvent("themeChanged",{detail:{isDarkMode:e}});document.dispatchEvent(t)}getCurrentTheme(){return this.isDarkMode?"dark":"light"}setTheme(e){"dark"===e||"light"===e?(this.isDarkMode="dark"===e,this.applyTheme(this.isDarkMode),this.saveTheme()):console.warn('Tema inv√°lido. Use "dark" ou "light".')}resetTheme(){try{localStorage.removeItem(n.themeStorageKey),this.isDarkMode=this.mediaQuery.matches,this.applyTheme(this.isDarkMode)}catch(e){console.warn("Erro ao resetar tema:",e)}}destroy(){console.log("ThemeManager destru√≠do")}}class p{constructor(e){this.domCache=e}renderSchedule(e,t){const a=this.domCache.get("scheduleContainer");if(a){this.clearElement(a);try{const r=this.createScheduleColumn("monday_tuesday","Segunda e Ter√ßa",t.monday_tuesday?.[e.monday_tuesdayCycleIndex],e.monday_tuesdayDate),n=this.createScheduleColumn("thursday_friday","Quinta e Sexta",t.thursday_friday?.[e.thursday_fridayCycleIndex],e.thursday_fridayDate);a.appendChild(r),a.appendChild(n),this.highlightCurrentDay(e)}catch(r){console.error("Erro ao renderizar escala:",r),this.renderErrorMessage(a)}}else console.error("Container da escala n√£o encontrado")}createScheduleColumn(e,t,r,n){if(!r)return console.warn(`Escala n√£o encontrada para ${t}`),this.createEmptyColumn(e,t,n);const s=this.createElement("div",{id:e,className:"column",attributes:{role:"region","aria-labelledby":`${e}-header`}}),i=this.createColumnHeader(e,t,n);s.appendChild(i);const o=this.createElement("div",{className:"rooms-list",attributes:{role:"list","aria-label":`Respons√°veis pela limpeza de ${t}`}});return a.forEach((e=>{const t=this.createRoomElement(e,r);o.appendChild(t)})),s.appendChild(o),s}createColumnHeader(e,t,a){const r=this.createElement("header",{className:"column-header"}),n=this.createElement("h3",{textContent:t,id:`${e}-header`,className:"day-title"}),s=this.createElement("span",{textContent:h(a),className:"date-display",attributes:{"aria-label":`Data: ${h(a)}`}});return r.appendChild(n),r.appendChild(s),r}createRoomElement(e,t){const a=t[e.key]||"N√£o definido",r=this.createElement("div",{className:"room",attributes:{role:"listitem","aria-label":`${e.label}: ${a}`}}),n=this.createElement("div",{className:"room-info"}),s=this.createElement("span",{className:"material-symbols-rounded room-icon",textContent:e.icon||"home",attributes:{"aria-hidden":"true"}}),i=this.createElement("span",{className:"room-name",textContent:e.label,attributes:{"aria-hidden":"true"}});n.appendChild(s),n.appendChild(i);const o=this.createElement("span",{className:"responsible",textContent:a,attributes:{title:`Respons√°vel: ${a}`}});return r.appendChild(n),r.appendChild(o),r}createEmptyColumn(e,t,a){const r=this.createElement("div",{id:e,className:"column column-empty"}),n=this.createColumnHeader(e,t,a);r.appendChild(n);const s=this.createElement("p",{textContent:"Escala n√£o dispon√≠vel para este dia",className:"empty-message"});return r.appendChild(s),r}highlightCurrentDay(e){const t=(new Date).getDay();document.querySelectorAll(".column.current-day").forEach((e=>{e.classList.remove("current-day")})),1===t||2===t?document.getElementById("monday_tuesday")?.classList.add("current-day"):4!==t&&5!==t||document.getElementById("thursday_friday")?.classList.add("current-day")}renderErrorMessage(e){this.clearElement(e);const t=this.createElement("div",{className:"error-message",innerHTML:'\n        <h3>‚ùå Erro ao carregar escala</h3>\n        <p>N√£o foi poss√≠vel carregar a escala de limpeza. Tente recarregar a p√°gina.</p>\n        <button onclick="location.reload()" class="reload-button">\n          üîÑ Recarregar p√°gina\n        </button>\n      '});e.appendChild(t)}updateCurrentDayHighlight(){document.querySelectorAll(".column.current-day").forEach((e=>{e.classList.remove("current-day")}))}createElement(e,t={}){const a=document.createElement(e);return t.id&&(a.id=t.id),t.className&&(a.className=t.className),t.textContent&&(a.textContent=t.textContent),t.innerHTML&&(a.innerHTML=t.innerHTML),t.attributes&&Object.entries(t.attributes).forEach((([e,t])=>{a.setAttribute(e,t)})),a}clearElement(e){if(e&&e.children)for(;e.firstChild;)e.removeChild(e.firstChild)}}class f{constructor(e){this.domCache=e}init(){this.renderWashingTable(),this.highlightCurrentWashingDay(),this.setupAutoUpdate()}highlightCurrentWashingDay(){const e=this.domCache.get("washingTableBody");if(e)try{e.querySelectorAll("tr.current-day").forEach((e=>{g.safeRemoveClass(e,"current-day")}));const t=(new Date).getDay(),a=e.querySelectorAll("tr");a[t]&&(g.safeAddClass(a[t],"current-day"),g.safeSetAttribute(a[t],"aria-current","date"),a.forEach(((e,a)=>{a!==t&&e.removeAttribute("aria-current")})),this.scrollToCurrentDay(a[t]))}catch(t){console.error("Erro ao destacar dia atual na m√°quina de lavar:",t)}else console.warn("Tabela da m√°quina de lavar n√£o encontrada")}scrollToCurrentDay(e){if(e)try{const t=e.getBoundingClientRect();t.top>=0&&t.bottom<=window.innerHeight||e.scrollIntoView({behavior:"smooth",block:"center"})}catch(t){console.warn("Erro ao rolar para o dia atual:",t)}}setupAutoUpdate(){setInterval((()=>{this.highlightCurrentWashingDay()}),6e4),g.safeAddEventListener(document,"visibilitychange",(()=>{document.hidden||this.highlightCurrentWashingDay()})),g.safeAddEventListener(window,"focus",(()=>{this.highlightCurrentWashingDay()}))}getTodayWashingInfo(){const e=(new Date).getDay();return r.find((t=>t.dayIndex===e))||null}getWashingInfoForDay(e){return e<0||e>6?(console.warn("√çndice de dia inv√°lido. Use 0-6 (domingo-s√°bado)"),null):r.find((t=>t.dayIndex===e))||null}getFullWeekSchedule(){return[...r]}isUserScheduledToday(e){const t=this.getTodayWashingInfo();return!!t&&t.users.toLowerCase().includes(e.toLowerCase())}findUserDays(e){return r.filter((t=>t.users.toLowerCase().includes(e.toLowerCase())))}renderWashingTable(){const e=this.domCache.get("washingTableBody");if(e)try{g.clearElement(e),r.forEach(((t,a)=>{const r=this.createWashingTableRow(t,a);e.appendChild(r)})),this.highlightCurrentWashingDay()}catch(t){console.error("Erro ao renderizar tabela da m√°quina de lavar:",t)}else console.error("Container da tabela da m√°quina de lavar n√£o encontrado")}createWashingTableRow(e,t){const a=g.createElement("tr",{attributes:{"data-day-index":e.dayIndex.toString()}}),r=g.createElement("td",{textContent:e.day}),n=g.createElement("td",{textContent:e.users});return a.appendChild(r),a.appendChild(n),a}forceUpdate(){this.highlightCurrentWashingDay()}destroy(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)}}class C{constructor(){this.domCache=null,this.themeManager=null,this.scheduleRenderer=null,this.washingManager=null,this.isInitialized=!1,this.initTime=Date.now(),this.errorCount=0,this.lastUpdate=null,this.lastError=null}async init(){try{if(console.log("üßπ Inicializando Sistema de Escalas da Rep√∫blica Tabajara..."),this.domCache=new m,!this.domCache.validateEssentialElements())throw new Error("Elementos essenciais do DOM n√£o encontrados");this.themeManager=new y(this.domCache),this.scheduleRenderer=new p(this.domCache),this.washingManager=new f(this.domCache),this.setupGlobalEventListeners(),await this.renderCleaningSchedule(),this.washingManager.init(),this.updateFooterYear(),this.isInitialized=!0,console.log("‚úÖ Sistema inicializado com sucesso!")}catch(e){console.error("‚ùå Erro ao inicializar aplica√ß√£o:",e),this.handleInitializationError(e)}}async renderCleaningSchedule(){try{const e=u(new Date,n.referenceDate,c);this.scheduleRenderer&&this.scheduleRenderer.renderSchedule(e,c)}catch(e){console.error("Erro ao renderizar escala de limpeza:",e),this.handleScheduleError(e)}}setupGlobalEventListeners(){document.addEventListener("visibilitychange",(()=>{!document.hidden&&this.isInitialized&&this.handleVisibilityChange()})),window.addEventListener("error",(e=>{this.handleGlobalError(e.error)})),window.addEventListener("unhandledrejection",(e=>{this.handleGlobalError(e.reason)}))}updateFooterYear(){const e=this.domCache?.get("footerYear");e&&(e.textContent=(new Date).getFullYear().toString())}handleVisibilityChange(){setTimeout((()=>{this.renderCleaningSchedule(),this.washingManager&&this.washingManager.highlightCurrentWashingDay()}),100)}handleInitializationError(e){const t=document.getElementById("cleaningSchedule");t&&(t.innerHTML=`\n        <div class="error-message">\n          <h3>‚ùå Erro de Inicializa√ß√£o</h3>\n          <p>N√£o foi poss√≠vel inicializar o sistema de escalas.</p>\n          <p>Erro: ${e.message}</p>\n          <button onclick="location.reload()" class="reload-button">\n            üîÑ Recarregar p√°gina\n          </button>\n        </div>\n      `)}handleScheduleError(e){console.error("Erro na escala:",e);const t=this.domCache?.get("scheduleContainer");t&&(t.innerHTML='\n        <div class="error-message">\n          <h3>‚ùå Erro na Escala</h3>\n          <p>N√£o foi poss√≠vel carregar a escala de limpeza.</p>\n          <button onclick="location.reload()" class="reload-button">\n            üîÑ Tentar novamente\n          </button>\n        </div>\n      ')}handleGlobalError(e){console.error("Erro global capturado:",e),this.errorCount++;const t=e instanceof Error?e.message:String(e);this.lastError&&this.lastError===t||(this.lastError=t)}getAppStats(){return{isInitialized:this.isInitialized,uptime:this.isInitialized?Date.now()-this.initTime:0,theme:this.themeManager?.getCurrentTheme()||"unknown",errors:this.errorCount||0,lastUpdate:this.lastUpdate||null}}forceUpdate(){this.isInitialized?(console.log("üîÑ For√ßando atualiza√ß√£o..."),this.renderCleaningSchedule(),this.washingManager&&this.washingManager.highlightCurrentWashingDay(),this.updateFooterYear(),this.lastUpdate=new Date,console.log("‚úÖ Atualiza√ß√£o conclu√≠da")):console.warn("Aplica√ß√£o n√£o est√° inicializada")}destroy(){this.isInitialized=!1,console.log("üßπ Aplica√ß√£o destru√≠da")}}let E=null;const b=async()=>{try{E=new C,await E.init(),"undefined"!=typeof window&&(window.EscalasApp=E)}catch(e){console.error("Falha cr√≠tica na inicializa√ß√£o:",e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",b):b();
//# sourceMappingURL=index-DqbLbeyr.js.map
