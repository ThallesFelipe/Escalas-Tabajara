!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const e={monday:[{cozinha:"A. Viihtube",banhBaixo:"Bixo Gaga",banhSuite:"Bixo Alexa",sala:"I. Ivan",lavabo:"I. Ivan"},{cozinha:"I. Ivan",banhBaixo:"A. Viihtube",banhSuite:"Bixo Gaga",sala:"Bixo Alexa",lavabo:"Bixo Alexa"},{cozinha:"Bixo Alexa",banhBaixo:"I. Ivan",banhSuite:"A. Viihtube",sala:"Bixo Gaga",lavabo:"Bixo Gaga"},{cozinha:"Bixo Gaga",banhBaixo:"Bixo Alexa",banhSuite:"I. Ivan",sala:"A. Viihtube",lavabo:"A. Viihtube"}],wednesday:[{cozinha:"Rita",banhBaixo:"LATAM",banhSuite:"TPM",sala:"Smigou",lavabo:"Smigou"},{cozinha:"Smigou",banhBaixo:"Rita",banhSuite:"LATAM",sala:"TPM",lavabo:"TPM"},{cozinha:"TPM",banhBaixo:"Smigou",banhSuite:"Rita",sala:"LATAM",lavabo:"LATAM"},{cozinha:"LATAM",banhBaixo:"TPM",banhSuite:"Smigou",sala:"Rita",lavabo:"Rita"}],friday:[{cozinha:"BBB",banhBaixo:"Leidi",banhSuite:"Madre",sala:"Espalha",lavabo:"Navala"},{cozinha:"Navala",banhBaixo:"BBB",banhSuite:"Leidi",sala:"Madre",lavabo:"Espalha"},{cozinha:"Espalha",banhBaixo:"Navala",banhSuite:"BBB",sala:"Leidi",lavabo:"Madre"},{cozinha:"Madre",banhBaixo:"Espalha",banhSuite:"Navala",sala:"BBB",lavabo:"Leidi"},{cozinha:"Leidi",banhBaixo:"Madre",banhSuite:"Espalha",sala:"Navala",lavabo:"BBB"}]},a=[{label:"üçΩÔ∏è Cozinha",key:"cozinha"},{label:"üöø Banheiro de baixo",key:"banhBaixo"},{label:"üõÅ Banheiro su√≠te",key:"banhSuite"},{label:"üõãÔ∏è Sala e corredor",key:"sala"},{label:"üöΩ Lavabo",key:"lavabo"}],t=[{day:"Domingo",users:"Espalha Lixo e B. Rita",dayIndex:0},{day:"Segunda-feira",users:"B. Gaga e B. Alexa",dayIndex:1},{day:"Ter√ßa-feira",users:"Latam, TPM e A. Viihtube",dayIndex:2},{day:"Quarta-feira",users:"Madre e Navala",dayIndex:3},{day:"Quinta-feira",users:"BBB e B. Smigou",dayIndex:4},{day:"Sexta-feira",users:"Leidi e B. Total",dayIndex:5},{day:"S√°bado",users:"I. Ivan",dayIndex:6}],n={referenceDate:new Date(2020,1,24),themeStorageKey:"escalas-tabajara-theme",darkModeClass:"dark-mode"},i="‚òÄÔ∏è",r="üåô",s="Alternar para modo escuro",o="Alternar para modo claro",l=e=>{if(!(e instanceof Date)||isNaN(e.getTime()))throw new Error("Data inv√°lida fornecida para formata√ß√£o");return e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})},d=(e,a,t)=>{var n,i,r;if(!(e instanceof Date)||isNaN(e.getTime())||!(a instanceof Date)||isNaN(a.getTime()))throw new Error("Datas inv√°lidas fornecidas para c√°lculo de ciclos");let s=new Date(e);0===e.getDay()&&s.setDate(e.getDate()+1);const o=(e=>{if(!(e instanceof Date)||isNaN(e.getTime()))throw new Error("Data inv√°lida fornecida para encontrar segunda-feira");const a=e.getDay(),t=0===a?-6:1-a,n=new Date(e);return n.setDate(e.getDate()+t),n.setHours(0,0,0,0),n})(s),l=Math.max(0,((e,a)=>{if(!(e instanceof Date)||isNaN(e.getTime())||!(a instanceof Date)||isNaN(a.getTime()))throw new Error("Datas inv√°lidas fornecidas para c√°lculo de diferen√ßa");const t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(a.getFullYear(),a.getMonth(),a.getDate());return Math.floor((t-n)/6048e5)})(o,a)),d=l%((null==(n=t.monday)?void 0:n.length)||1),c=l%((null==(i=t.wednesday)?void 0:i.length)||1),h=l%((null==(r=t.friday)?void 0:r.length)||1),u=new Date(o);u.setDate(o.getDate()+2);const m=new Date(o);return m.setDate(o.getDate()+4),{mondayDate:o,wednesdayDate:u,fridayDate:m,mondayCycleIndex:d,wednesdayCycleIndex:c,fridayCycleIndex:h}},c=e=>{if(!(e instanceof Date)||isNaN(e.getTime()))return!1;const a=new Date;return e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()};class h{constructor(){this.cache=new Map,this.initializeCache()}initializeCache(){const e={scheduleContainer:"#cleaningSchedule",washingTableBody:".washing-schedule table tbody",themeToggle:"#themeToggle",themeIcon:"#themeIcon",footerYear:"#currentYear"};for(const[a,t]of Object.entries(e))this.cache.set(a,document.querySelector(t))}get(e){return this.cache.get(e)}set(e,a){this.cache.set(e,a)}validateEssentialElements(){return["scheduleContainer","themeToggle","themeIcon"].every((e=>null!==this.get(e)))}refresh(){this.cache.clear(),this.initializeCache()}}class u{static createElement(e,a={}){const t=document.createElement(e);if(a.classes&&t.classList.add(...a.classes),a.attributes)for(const[n,i]of Object.entries(a.attributes))t.setAttribute(n,i);return a.textContent&&(t.textContent=a.textContent),a.innerHTML&&(t.innerHTML=a.innerHTML),t}static clearElement(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}static safeAddClass(e,a){e&&void 0!==e.classList&&e.classList.add(a)}static safeRemoveClass(e,a){e&&void 0!==e.classList&&e.classList.remove(a)}static hasClass(e,a){return e&&e.classList&&e.classList.contains(a)}static safeSetAttribute(e,a,t){e&&"function"==typeof e.setAttribute&&e.setAttribute(a,t)}static safeSetText(e,a){e&&(e.textContent=a)}static safeAddEventListener(e,a,t,n={}){e&&"function"==typeof e.addEventListener&&e.addEventListener(a,t,n)}}class m{constructor(e){this.domCache=e,this.isDarkMode=!1,this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.init()}init(){this.loadSavedTheme(),this.setupEventListeners(),this.setupMediaQueryListener(),this.applyTheme(this.isDarkMode)}loadSavedTheme(){try{const e=localStorage.getItem(n.themeStorageKey);this.isDarkMode=null!==e?"dark"===e:this.mediaQuery.matches}catch(e){console.warn("Erro ao carregar tema do localStorage:",e),this.isDarkMode=this.mediaQuery.matches}}setupEventListeners(){const e=this.domCache.get("themeToggle");u.safeAddEventListener(e,"click",(()=>{this.toggleTheme()})),u.safeAddEventListener(e,"keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleTheme())}))}setupMediaQueryListener(){this.mediaQuery.addEventListener("change",(e=>{null===localStorage.getItem(n.themeStorageKey)&&(this.isDarkMode=e.matches,this.applyTheme(this.isDarkMode))}))}toggleTheme(){this.isDarkMode=!this.isDarkMode,this.applyTheme(this.isDarkMode),this.saveTheme()}applyTheme(e){const a=document.body,t=this.domCache.get("themeIcon"),l=this.domCache.get("themeToggle");e?(u.safeAddClass(a,n.darkModeClass),u.safeSetText(t,r),u.safeSetAttribute(l,"aria-label",o)):(u.safeRemoveClass(a,n.darkModeClass),u.safeSetText(t,i),u.safeSetAttribute(l,"aria-label",s)),this.dispatchThemeChangeEvent(e)}saveTheme(){try{localStorage.setItem(n.themeStorageKey,this.isDarkMode?"dark":"light")}catch(e){console.warn("Erro ao salvar tema no localStorage:",e)}}dispatchThemeChangeEvent(e){const a=new CustomEvent("themeChanged",{detail:{isDarkMode:e}});document.dispatchEvent(a)}getCurrentTheme(){return this.isDarkMode?"dark":"light"}setTheme(e){"dark"===e||"light"===e?(this.isDarkMode="dark"===e,this.applyTheme(this.isDarkMode),this.saveTheme()):console.warn('Tema inv√°lido. Use "dark" ou "light".')}resetTheme(){try{localStorage.removeItem(n.themeStorageKey),this.isDarkMode=this.mediaQuery.matches,this.applyTheme(this.isDarkMode)}catch(e){console.warn("Erro ao resetar tema:",e)}}destroy(){console.log("ThemeManager destru√≠do")}}class g{constructor(e){this.domCache=e}renderSchedule(e,a){var t,n,i;const r=this.domCache.get("scheduleContainer");if(r){this.clearElement(r);try{const s=this.createScheduleColumn("monday","Segunda-feira",null==(t=a.monday)?void 0:t[e.mondayCycleIndex],e.mondayDate),o=this.createScheduleColumn("wednesday","Quarta-feira",null==(n=a.wednesday)?void 0:n[e.wednesdayCycleIndex],e.wednesdayDate),l=this.createScheduleColumn("friday","Sexta-feira",null==(i=a.friday)?void 0:i[e.fridayCycleIndex],e.fridayDate);r.appendChild(s),r.appendChild(o),r.appendChild(l),this.highlightCurrentDay(e)}catch(s){console.error("Erro ao renderizar escala:",s),this.renderErrorMessage(r)}}else console.error("Container da escala n√£o encontrado")}createScheduleColumn(e,t,n,i){if(!n)return console.warn(`Escala n√£o encontrada para ${t}`),this.createEmptyColumn(e,t,i);const r=this.createElement("div",{id:e,className:"column",attributes:{role:"region","aria-labelledby":`${e}-header`}}),s=this.createColumnHeader(e,t,i);r.appendChild(s);const o=this.createElement("div",{className:"rooms-list",attributes:{role:"list","aria-label":`Respons√°veis pela limpeza de ${t}`}});return a.forEach((e=>{const a=this.createRoomElement(e,n);o.appendChild(a)})),r.appendChild(o),r}createColumnHeader(e,a,t){const n=this.createElement("header",{className:"column-header"}),i=this.createElement("h3",{textContent:a,id:`${e}-header`,className:"day-title"}),r=this.createElement("span",{textContent:l(t),className:"date-display",attributes:{"aria-label":`Data: ${l(t)}`}});return n.appendChild(i),n.appendChild(r),n}createRoomElement(e,a){const t=a[e.key]||"N√£o definido",n=this.createElement("div",{className:"room",attributes:{role:"listitem","aria-label":`${e.label}: ${t}`}}),i=this.createElement("span",{className:"room-name",textContent:e.label,attributes:{"aria-hidden":"true"}}),r=this.createElement("span",{className:"responsible",textContent:t,attributes:{title:`Respons√°vel: ${t}`}});return n.appendChild(i),n.appendChild(r),n}createEmptyColumn(e,a,t){const n=this.createElement("div",{id:e,className:"column column-empty"}),i=this.createColumnHeader(e,a,t);n.appendChild(i);const r=this.createElement("p",{textContent:"Escala n√£o dispon√≠vel para este dia",className:"empty-message"});return n.appendChild(r),n}highlightCurrentDay(e){var a,t,n;const i=(new Date).getDay();document.querySelectorAll(".column.current-day").forEach((e=>{e.classList.remove("current-day")})),1===i&&c(e.mondayDate)?null==(a=document.getElementById("monday"))||a.classList.add("current-day"):3===i&&c(e.wednesdayDate)?null==(t=document.getElementById("wednesday"))||t.classList.add("current-day"):5===i&&c(e.fridayDate)&&(null==(n=document.getElementById("friday"))||n.classList.add("current-day"))}renderErrorMessage(e){this.clearElement(e);const a=this.createElement("div",{className:"error-message",innerHTML:'\n        <h3>‚ùå Erro ao carregar escala</h3>\n        <p>N√£o foi poss√≠vel carregar a escala de limpeza. Tente recarregar a p√°gina.</p>\n        <button onclick="location.reload()" class="reload-button">\n          üîÑ Recarregar p√°gina\n        </button>\n      '});e.appendChild(a)}updateCurrentDayHighlight(){document.querySelectorAll(".column.current-day").forEach((e=>{e.classList.remove("current-day")}))}createElement(e,a={}){const t=document.createElement(e);return a.id&&(t.id=a.id),a.className&&(t.className=a.className),a.textContent&&(t.textContent=a.textContent),a.innerHTML&&(t.innerHTML=a.innerHTML),a.attributes&&Object.entries(a.attributes).forEach((([e,a])=>{t.setAttribute(e,a)})),t}clearElement(e){if(e&&e.children)for(;e.firstChild;)e.removeChild(e.firstChild)}}class y{constructor(e){this.domCache=e}init(){this.highlightCurrentWashingDay(),this.setupAutoUpdate()}highlightCurrentWashingDay(){const e=this.domCache.get("washingTableBody");if(e)try{e.querySelectorAll("tr.current-day").forEach((e=>{u.safeRemoveClass(e,"current-day")}));const a=(new Date).getDay(),t=e.querySelectorAll("tr");t[a]&&(u.safeAddClass(t[a],"current-day"),u.safeSetAttribute(t[a],"aria-current","date"),t.forEach(((e,t)=>{t!==a&&e.removeAttribute("aria-current")})),this.scrollToCurrentDay(t[a]))}catch(a){console.error("Erro ao destacar dia atual na m√°quina de lavar:",a)}else console.warn("Tabela da m√°quina de lavar n√£o encontrada")}scrollToCurrentDay(e){if(e)try{const a=e.getBoundingClientRect();a.top>=0&&a.bottom<=window.innerHeight||e.scrollIntoView({behavior:"smooth",block:"center"})}catch(a){console.warn("Erro ao rolar para o dia atual:",a)}}setupAutoUpdate(){setInterval((()=>{this.highlightCurrentWashingDay()}),6e4),u.safeAddEventListener(document,"visibilitychange",(()=>{document.hidden||this.highlightCurrentWashingDay()})),u.safeAddEventListener(window,"focus",(()=>{this.highlightCurrentWashingDay()}))}getTodayWashingInfo(){const e=(new Date).getDay();return t.find((a=>a.dayIndex===e))||null}getWashingInfoForDay(e){return e<0||e>6?(console.warn("√çndice de dia inv√°lido. Use 0-6 (domingo-s√°bado)"),null):t.find((a=>a.dayIndex===e))||null}getFullWeekSchedule(){return[...t]}isUserScheduledToday(e){const a=this.getTodayWashingInfo();return!!a&&a.users.toLowerCase().includes(e.toLowerCase())}findUserDays(e){return t.filter((a=>a.users.toLowerCase().includes(e.toLowerCase())))}renderWashingTable(){const e=this.domCache.get("washingTableBody");if(e)try{u.clearElement(e),t.forEach(((a,t)=>{const n=this.createWashingTableRow(a,t);e.appendChild(n)})),this.highlightCurrentWashingDay()}catch(a){console.error("Erro ao renderizar tabela da m√°quina de lavar:",a)}else console.error("Container da tabela da m√°quina de lavar n√£o encontrado")}createWashingTableRow(e,a){const t=u.createElement("tr",{attributes:{"data-day-index":e.dayIndex.toString()}}),n=u.createElement("td",{textContent:e.day}),i=u.createElement("td",{textContent:e.users});return t.appendChild(n),t.appendChild(i),t}forceUpdate(){this.highlightCurrentWashingDay()}destroy(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)}}class p{constructor(){this.domCache=null,this.themeManager=null,this.scheduleRenderer=null,this.washingManager=null,this.isInitialized=!1,this.initTime=Date.now(),this.errorCount=0,this.lastUpdate=null,this.lastError=null}async init(){try{if(console.log("üßπ Inicializando Sistema de Escalas da Rep√∫blica Tabajara..."),this.domCache=new h,!this.domCache.validateEssentialElements())throw new Error("Elementos essenciais do DOM n√£o encontrados");this.themeManager=new m(this.domCache),this.scheduleRenderer=new g(this.domCache),this.washingManager=new y(this.domCache),this.setupGlobalEventListeners(),await this.renderCleaningSchedule(),this.washingManager.init(),this.updateFooterYear(),this.isInitialized=!0,console.log("‚úÖ Sistema inicializado com sucesso!")}catch(e){console.error("‚ùå Erro ao inicializar aplica√ß√£o:",e),this.handleInitializationError(e)}}async renderCleaningSchedule(){try{const a=d(new Date,n.referenceDate,e);this.scheduleRenderer&&this.scheduleRenderer.renderSchedule(a,e)}catch(a){console.error("Erro ao renderizar escala de limpeza:",a),this.handleScheduleError(a)}}setupGlobalEventListeners(){document.addEventListener("visibilitychange",(()=>{!document.hidden&&this.isInitialized&&this.handleVisibilityChange()})),window.addEventListener("error",(e=>{this.handleGlobalError(e.error)})),window.addEventListener("unhandledrejection",(e=>{this.handleGlobalError(e.reason)}))}updateFooterYear(){var e;const a=null==(e=this.domCache)?void 0:e.get("footerYear");a&&(a.textContent=(new Date).getFullYear().toString())}handleVisibilityChange(){setTimeout((()=>{this.renderCleaningSchedule(),this.washingManager&&this.washingManager.highlightCurrentWashingDay()}),100)}handleInitializationError(e){const a=document.getElementById("cleaningSchedule");a&&(a.innerHTML=`\n        <div class="error-message">\n          <h3>‚ùå Erro de Inicializa√ß√£o</h3>\n          <p>N√£o foi poss√≠vel inicializar o sistema de escalas.</p>\n          <p>Erro: ${e.message}</p>\n          <button onclick="location.reload()" class="reload-button">\n            üîÑ Recarregar p√°gina\n          </button>\n        </div>\n      `)}handleScheduleError(e){var a;console.error("Erro na escala:",e);const t=null==(a=this.domCache)?void 0:a.get("scheduleContainer");t&&(t.innerHTML='\n        <div class="error-message">\n          <h3>‚ùå Erro na Escala</h3>\n          <p>N√£o foi poss√≠vel carregar a escala de limpeza.</p>\n          <button onclick="location.reload()" class="reload-button">\n            üîÑ Tentar novamente\n          </button>\n        </div>\n      ')}handleGlobalError(e){console.error("Erro global capturado:",e),this.errorCount++;const a=e instanceof Error?e.message:String(e);this.lastError&&this.lastError===a||(this.lastError=a)}getAppStats(){var e;return{isInitialized:this.isInitialized,uptime:this.isInitialized?Date.now()-this.initTime:0,theme:(null==(e=this.themeManager)?void 0:e.getCurrentTheme())||"unknown",errors:this.errorCount||0,lastUpdate:this.lastUpdate||null}}forceUpdate(){this.isInitialized?(console.log("üîÑ For√ßando atualiza√ß√£o..."),this.renderCleaningSchedule(),this.washingManager&&this.washingManager.highlightCurrentWashingDay(),this.updateFooterYear(),this.lastUpdate=new Date,console.log("‚úÖ Atualiza√ß√£o conclu√≠da")):console.warn("Aplica√ß√£o n√£o est√° inicializada")}destroy(){this.isInitialized=!1,console.log("üßπ Aplica√ß√£o destru√≠da")}}let b=null;const f=async()=>{try{b=new p,await b.init(),"undefined"!=typeof window&&(window.EscalasApp=b)}catch(e){console.error("Falha cr√≠tica na inicializa√ß√£o:",e)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f();
//# sourceMappingURL=index-CjZFROla.js.map
